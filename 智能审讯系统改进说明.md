# 智能审讯系统改进说明

## 改进日期
2025年12月17日

## 问题描述
用户反馈"你做这件事的动机是什么？"这类模糊指代问题无法得到有效回答，因为系统无法识别"这件事"指代的对象。

## 改进内容

### 1. 新增模糊指代检测功能
- 添加了 `detectVagueReference()` 方法来检测问题中的模糊指代
- 识别的模糊词汇：'这件事', '这个事', '那件事', '这个', '那个', '它' 等

### 2. 新增模糊指代处理功能
- 添加了 `handleVagueReference()` 方法来处理模糊指代问题
- 添加了 `inferContext()` 方法来根据上下文推断指代内容

### 3. 上下文智能推断
根据问题中的关键词智能推断可能的指代：
- **动机类问题**：当问题包含"动机"、"为什么"、"原因"时
- **行为类问题**：当问题包含"做"、"行为"、"行动"时

### 4. 角色特定回应
为每个角色添加了基于上下文的具体回答：

#### 桐原亮司
- 动机：保护雪穗，让她在阳光下生活
- 行为：当时只是在房间里待着

#### 唐泽雪穗  
- 动机：改变命运，摆脱贫困
- 行为：一直在图书馆看书

#### 笹垣润三
- 动机：查明真相，给死者交代
- 行为：依法进行调查

#### 其他角色也相应增加了上下文相关的回答

### 5. 关键词库扩展
为各角色增加了更多相关关键词：
- **亮司**：'守护', '牺牲', '保护'等
- **雪穗**：'努力', '伪装', '隐藏'等  
- **笹垣**：'坚持', '真相', '直觉'等

### 6. 新增情绪表情
- 添加了 'confused' (😕) 情绪表示困惑
- 添加了 '决然' (😠) 情绪表示决心
- 添加了 '严肃' (😠) 情绪表示严肃

## 改进效果

### 改进前
- 用户：你做这件事的动机是什么？
- 系统：关于这个问题……我不太清楚该说什么。❌

### 改进后
- 用户：你做这件事的动机是什么？
- 系统：如果是指我的行为...我当时只是在房间里待着。我没有做什么特别的事情。😐✅

或：
- 系统：如果是指案发当天我的行为...我当时只是想保护雪穗。我不能让她受到伤害，无论代价是什么。😰✅

## 技术实现
1. **模糊指代检测**：通过关键词匹配识别模糊指代
2. **上下文推断**：结合问题类型和角色特征推断具体指代
3. **智能回答生成**：根据推断结果生成相应回答
4. **降级处理**：当无法推断时，请求用户澄清

## 测试建议
1. 测试各种模糊指代问题："这件事", "那个事", "这个"等
2. 测试结合动机的模糊问题："做这件事的动机"
3. 测试结合行为的模糊问题："你为什么要这么做"
4. 测试不同角色的回答是否符合其性格特征

## 文件修改
- 修改文件：`最终基础.html`
- 主要修改：JavaScript部分的 `IntelligentInterrogationSystem` 类